<div class="overview-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <app-loader [isLoadingIconVisible]="isLoading"></app-loader>
  </div>

  <!-- Error State -->
  <div *ngIf="hasError && !isLoading" class="error-state">
    <div class="error-icon">⚠️</div>
    <h3>Unable to Load Dashboard</h3>
    <p>{{ errorMessage }}</p>
    <button class="retry-btn" (click)="retryLoadData()">Try Again</button>
  </div>

  <!-- Success State -->
  <div *ngIf="!isLoading && !hasError">
    <div class="overview-boxes">
      <ngx-charts-number-card
        [view]="[1100, 170]"
        [results]="numberCardData"
        [animations]="true"
        cardColor="#ececec"
      >
      </ngx-charts-number-card>
    </div>

    <div class="charts-grid">
      <div class="chart-box">
        <h3>Performance Trend</h3>
        <div *ngIf="hasRecentScores; else noRecentScores">
          <ngx-charts-line-chart
            [view]="[1000, 500]"
            [results]="lineChartData"
            [gradient]="false"
            [xAxis]="true"
            [yAxis]="true"
            [legend]="false"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="Tests"
            yAxisLabel="Scores"
            [autoScale]="true"
          >
          </ngx-charts-line-chart>
        </div>
        <ng-template #noRecentScores>
          <div class="no-data">
            <p>Take some tests to see your performance trend!</p>
          </div>
        </ng-template>
      </div>

      <div class="chart-box">
        <h3>Category Averages</h3>
        <div *ngIf="hasCategoryData; else noCategoryData">
          <ngx-charts-bar-vertical
            [view]="[1000, 500]"
            [results]="barChartData"
            [gradient]="false"
            [xAxis]="true"
            [yAxis]="true"
            [legend]="false"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="Categories"
            yAxisLabel="Avg Score"
          >
          </ngx-charts-bar-vertical>
        </div>
        <ng-template #noCategoryData>
          <div class="no-data">
            <p>Complete tests in different categories to see averages!</p>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
